<ion-view view-title="Trackbus">
    <!--INSERT CSS HERE-->
    <ion-content class="has-header">
        <body>
            <script id="searchbox.tpl.html" type="text/ng-template">
                <input type="text" placeholder="Endereço">
            </script>
            <div class="map-container">
                <ui-gmap-google-map center="vm.map.center" zoom="vm.map.zoom" control="vm.map">
                    <!-- Search box -->
                    <ui-gmap-search-box options="vm.searchbox.options"
                        template="vm.searchbox.template"
                        events="vm.searchbox.events" position="vm.searchbox.position">
                    </ui-gmap-search-box>
                    <!-- Search box -->

                    <!-- User marker -->
                    <ui-gmap-marker coords="vm.userMarker.coords" options="vm.userMarker.options"
                        events="vm.userMarker.events" idkey="'user'"
                        click="vm.userMarker.click">
                            <ui-gmap-window>
                                <div>
                                    olar
                                </div>
                            </ui-gmap-window>
                    </ui-gmap-marker>
                    <!-- User marker -->

                    <!-- Bus markers -->
                    <div ng-repeat="marker in vm.busMarkers">
                        <ui-gmap-marker
                            coords="marker.coords" options="marker.options"
                            events="marker.events" idkey="marker.id"
                            click="marker.click">
                            <!-- Window content -->
                            <ui-gmap-window>
                                <div>
                                    Linha: {{::marker.line}}
                                    <br>
                                    Distância: {{::marker.distance}} km
                                    <br>
                                    <button class="button button-small button-assertive" ng-click="$parent.vm.addProximityListener($parent.marker)">
                                        Notificar proximidade
                                    </button>
                                </div>
                            </ui-gmap-window>
                        </ui-gmap-marker>
                    </div>
                    <!-- Bus markers -->
                </ui-gmap-google-map>

                <label class="item item-divider">Acompanhar viagem na linha</label>
                <div class="row">
                    <button ng-repeat="line in vm.linesIds" ng-click="vm.goToOptions(line)"
                        class="col button button-outline button-assertive">
                        {{::line}}
                    </button>
                </div>
            </div>
        </body>
    </ion-content>
</ion-view>
